webpackJsonp([1],{"2BOk":function(e,t){},"6lms":function(e,t){},Egnp:function(e,t){},KecJ:function(e,t){},NHnr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("7+uW"),n=s("Dd8w"),a=s.n(n),r=s("NYxO"),o=s("V0RO"),l=s("mtWM"),c=s.n(l),d={API:"http://localhost:3030",url:"http://localhost:8080"};function m(e,t){var s=this;c.a.post(d.API+"/authentication",{email:e,password:t,strategy:"local"}).then(function(t){if(!t.data||!t.data.accessToken)throw t;var i=t.data.accessToken,n=e;s.$store.commit("setUserAndToken",{username:n,token:i}),s.$router.push("/films")}).catch(function(e){return console.error(e)})}var u={name:"LogIn",data:function(){return{formUser:"",formPass:""}},computed:a()({},Object(r.b)({loggedInUser:"getUsername"})),methods:{login:m,logout:function(){this.$store.commit("logOut"),this.$router.push("/")}},components:{UserIcon:o.g}},f={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.loggedInUser?s("form",{staticClass:"form-inline"},[s("span",{staticClass:"mr-sm-2"},[s("user-icon",{staticStyle:{height:"1em"}}),e._v(" "+e._s(e.loggedInUser))],1),e._v(" "),s("button",{staticClass:"btn btn-outline-success my-2 my-sm-0",attrs:{type:"submit"},on:{click:function(t){t.preventDefault(),e.logOut(t)}}},[e._v("Log Out")])]):s("form",{staticClass:"form-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.formUser,expression:"formUser"}],staticClass:"form-control mr-2",attrs:{type:"text",placeholder:"example@example.com","aria-label":"Username",required:""},domProps:{value:e.formUser},on:{input:function(t){t.target.composing||(e.formUser=t.target.value)}}}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.formPass,expression:"formPass"}],staticClass:"form-control mr-2",attrs:{type:"password",placeholder:"password","aria-label":"Password",required:""},domProps:{value:e.formPass},on:{input:function(t){t.target.composing||(e.formPass=t.target.value)}}}),e._v(" "),s("button",{staticClass:"btn btn-outline-success my-2 my-sm-0 mr-1",attrs:{type:"submit"},on:{click:function(t){t.preventDefault(),e.login(e.formUser,e.formPass)}}},[e._v("Log In")]),e._v(" "),s("router-link",{staticClass:"btn btn-outline-success my-2 my-sm-0",attrs:{to:"/register"}},[e._v("Register")])],1)])},staticRenderFns:[]};var p={name:"NavBar",components:{LogIn:s("VU/8")(u,f,!1,function(e){s("lWbd")},"data-v-9a46a81a",null).exports,FilmIcon:o.c}},h={render:function(){var e=this.$createElement,t=this._self._c||e;return t("nav",{staticClass:"navbar navbar-light bg-light"},[t("h1",[t("router-link",{staticClass:"navbar-brand",attrs:{to:"/"}},[t("film-icon",{staticStyle:{height:"1em"}}),this._v(" PunkFilms")],1)],1),this._v(" "),t("div",{staticClass:"mr-auto links mt-1"},[t("router-link",{attrs:{to:"/films"}},[this._v("Films")]),this._v(" "),t("router-link",{attrs:{to:"/liked-films"}},[this._v("Liked Films")])],1),this._v(" "),t("LogIn")],1)},staticRenderFns:[]},v={name:"App",components:{NavBar:s("VU/8")(p,h,!1,null,null,null).exports}},g={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("NavBar"),this._v(" "),t("div",{staticClass:"container"},[t("div",{staticClass:"row"},[t("router-view")],1)])],1)},staticRenderFns:[]};var _=s("VU/8")(v,g,!1,function(e){s("6lms")},null,null).exports;i.a.use(r.a);var k=new r.a.Store({state:{username:"",token:""},mutations:{setUserAndToken:function(e,t){e.username=t.username,e.token=t.token},logOut:function(e){e.username="",e.token=""}},getters:{getUsername:function(e){return e.username},getToken:function(e){return e.token}}}),b=s("/ocq"),w={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"mt-3"},[t("h1",[this._v("Welcome to PunkFilms!")])])}]};var y=s("VU/8")({name:"Home"},w,!1,function(e){s("WphP")},"data-v-19aebe7c",null).exports,C={render:function(){var e=this.$createElement;return(this._self._c||e)("span",{staticClass:"badge badge-pill badge-dark mr-1"},[this._v(this._s(this.genre.Name))])},staticRenderFns:[]},F={name:"FilmCard",props:["film","liked","disliked","seen"],computed:{tmdbLink:function(){return"https://www.themoviedb.org/movie/"+this.film.tmdb_id},youtubeSearch:function(){return"https://youtube.com/results?search_query="+this.film.title+"%20trailer"}},components:{GenreBadge:s("VU/8")({name:"GenreBadge",props:["genre"]},C,!1,null,null,null).exports,StarIcon:o.d,ThumbsUpIcon:o.f,ThumbsDownIcon:o.e,EyeIcon:o.b,VideoIcon:o.h}},I={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"card"},[s("img",{staticClass:"card-img-top img-fluid",attrs:{src:e.film.image,alt:e.film.title}}),e._v(" "),s("div",{staticClass:"card-body"},[s("h5",{staticClass:"card-title mb-0 pb-0"},[e._v(e._s(e.film.title))]),e._v(" "),s("p",{staticClass:"card-text"},e._l(e.film.genres,function(e){return s("GenreBadge",{key:e.id,attrs:{genre:e}})})),e._v(" "),s("p",{staticClass:"card-text rating mb-1 d-flex justify-content-between"},[s("star-icon",{staticStyle:{height:"1em"}}),e._v(" "+e._s(e.film.rating)+"/10 "),s("span",[e._v(e._s(e.date))])],1),e._v(" "),s("p",{staticClass:"card-text"},[e._v("\n      "+e._s(e.film.overview)+"\n    ")]),e._v(" "),s("p",{staticClass:"card-text d-flex justify-content-between"},[s("a",{attrs:{href:e.tmdbLink,target:"_blank"}},[e._v("Read more")]),e._v(" "),s("a",{attrs:{href:e.youtubeSearch,target:"_blank"}},[s("video-icon")],1)])]),e._v(" "),s("div",{staticClass:"card-footer d-flex justify-content-between"},[s("span",{class:[e.liked?"liked":""]},[s("thumbs-up-icon")],1),e._v(" "),s("thumbs-down-icon",{class:[e.disliked?"disliked":""]}),e._v(" "),s("eye-icon",{class:[e.seen?"seen":""]})],1)])},staticRenderFns:[]};var x={name:"ListFilms",components:{FilmCard:s("VU/8")(F,I,!1,function(e){s("KecJ")},"data-v-5da4c030",null).exports},data:function(){return{films:[],likedFilms:[],dislikedFilms:[],seenFilms:[],likesId:""}},created:function(){var e=this;c.a.get(this.$config.API+"/film",{headers:{Authorization:"Bearer "+this.$store.state.token}}).then(function(t){if(!t.data)throw t;e.films=t.data.data,c.a.get(e.$config.API+"/like?user._id="+e.loggedInUserId,{headers:{Authorization:"Bearer "+e.$store.state.token}}).then(function(t){e.likedFilms=t.data[0].likes,e.dislikedFilms=t.data[0].dislikes,e.seenFilms=t.data[0].seen,e.likesId=t.data[0].id}).catch(function(e){return console.error(e)})}).catch(function(e){return console.error(e)})},computed:a()({},Object(r.b)({loggedInUser:"getUsername",loggedInUserId:"getUserId"})),methods:{checkStatus:function(e,t){return this[e+"Films"].findIndex(function(e){return console.log("Looking for "+t+", found "+e.id),e.id===t})>-1}}},U={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"mx-4 mx-md-3 mx-lg-2 mx-xl-1"},[s("div",{staticClass:"mt-3 card-columns"},e._l(e.films,function(t){return s("FilmCard",{key:t.id,attrs:{film:t,liked:e.checkStatus("liked",t.id),disliked:e.checkStatus("disliked",t.id),seen:e.checkStatus("seen",t.id)}})}))])},staticRenderFns:[]};var P=s("VU/8")(x,U,!1,function(e){s("dvaQ")},null,null).exports,$={name:"LikedFilms",data:function(){return{likedFilms:[],dislikedFilms:[],seenFilms:[],likesId:""}},created:function(){var e=this;c.a.get(this.$config.API+"/like?user._id="+this.loggedInUserId,{headers:{Authorization:"Bearer "+this.$store.state.token}}).then(function(t){e.likedFilms=t.data[0].likes,e.dislikedFilms=t.data[0].dislikes,e.seenFilms=t.data[0].seen,e.likesId=t.data[0].id}).catch(function(e){return console.error(e)})},computed:a()({},Object(r.b)({loggedInUser:"getUsername",loggedInUserId:"getUserId"})),methods:{unlike:function(e){var t=this,s=e.target.id,i=this.likedFilms.filter(function(e){return e.id!==s});c.a.put(this.$config.API+"/like/"+this.likesId,{likes:i},{headers:{Authorization:"Bearer "+this.$store.state.token}}).then(function(){t.likedFilms=i}).catch(function(e){return console.error(e)})},undislike:function(e){var t=this,s=e.target.id,i=this.dislikedFilms.filter(function(e){return e.id!==s});c.a.post(this.$config.API+"/like?id="+this.likesId,{dislikes:i}).then(function(e){t.dislikedFilms=i}).catch(function(e){return console.error(e)})},unsee:function(e){var t=this,s=e.target.id,i=this.seenFilms.filter(function(e){return e.id!==s});c.a.post(this.$config.API+"/like?id="+this.likesId,{seen:i}).then(function(e){t.seenFilms=i}).catch(function(e){return console.error(e)})}},components:{DeleteIcon:o.a}},E={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"mx-4 mx-md-3 mx-lg-2 mx-xl-1"},[s("h2",[e._v("Liked Films")]),e._v(" "),s("ul",{staticClass:"mt-3"},e._l(e.likedFilms,function(t){return s("li",{key:t.id},[e._v(e._s(t.Title)+" "),s("delete-icon",{staticStyle:{height:"1em"},attrs:{id:t.id},on:{click:e.unlike}})],1)})),e._v(" "),s("h2",[e._v("Disliked Films")]),e._v(" "),s("ul",{staticClass:"mt-3"},e._l(e.dislikedFilms,function(t){return s("li",{key:t.id},[e._v(e._s(t.Title)+" "),s("delete-icon",{staticStyle:{height:"1em"},attrs:{id:t.id},on:{click:e.undislike}})],1)})),e._v(" "),s("h2",[e._v("Seen Films")]),e._v(" "),s("ul",{staticClass:"mt-3"},e._l(e.seenFilms,function(t){return s("li",{key:t.id},[e._v(e._s(t.Title)+" "),s("delete-icon",{staticStyle:{height:"1em"},attrs:{id:t.id},on:{click:e.unsee}})],1)}))])},staticRenderFns:[]};var A=s("VU/8")($,E,!1,function(e){s("Egnp")},null,null).exports;var L={name:"Register",data:function(){return{email:"",pass1:"",pass2:""}},computed:{passwordsMatch:function(){return this.pass1===this.pass2},emailContainsAt:function(){return this.email.indexOf("@")>-1},passwordLongEnough:function(){return this.pass1.length>=8},formValid:function(){return this.passwordsMatch&&this.emailContainsAt&&this.passwordLongEnough}},methods:{register:function(e,t){c.a.post(d.API+"/users",{email:e,password:t}).then(m(e,t)).catch(function(e){return console.error("There was an error registering you: "+e+". This username may not be available, or you may have already registered with this email address.")})}}},S={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"mt-3"},[s("h1",[e._v("Register")]),e._v(" "),s("form",[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"email"}},[e._v("Email address")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email",id:"email","aria-describedby":"emailHelp",placeholder:"Enter email"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),e._v(" "),s("small",{staticClass:"form-text text-muted",attrs:{id:"emailHelp"}},[e._v("We'll never share your email with anyone else.")])]),e._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"password1"}},[e._v("Password")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.pass1,expression:"pass1"}],staticClass:"form-control",attrs:{type:"password",id:"password1",placeholder:"Password"},domProps:{value:e.pass1},on:{input:function(t){t.target.composing||(e.pass1=t.target.value)}}}),e._v(" "),e.passwordLongEnough?e._e():s("small",{staticClass:"form-text text-muted",attrs:{id:"password1Help"}},[e._v("Your password needs to be at least 8 characters!")])]),e._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"password2"}},[e._v("Password again")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.pass2,expression:"pass2"}],staticClass:"form-control",attrs:{type:"password",id:"password2",placeholder:"Password","aria-describedby":"password2Help"},domProps:{value:e.pass2},on:{input:function(t){t.target.composing||(e.pass2=t.target.value)}}}),e._v(" "),s("small",{staticClass:"form-text text-muted",attrs:{id:"password2Help"}},[e._v("Confirm your password. "+e._s(e.passwordsMatch?"":"Passwords don't match!"))])]),e._v(" "),s("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:!e.formValid},on:{click:function(t){t.preventDefault(),e.register(e.email,e.pass1)}}},[e._v("Submit")])])])},staticRenderFns:[]};var R=s("VU/8")(L,S,!1,function(e){s("2BOk")},"data-v-376f9a95",null).exports;i.a.use(b.a);var O=new b.a({routes:[{path:"/",name:"Home",component:y},{path:"/films",name:"Film List",component:P,beforeEnter:T},{path:"/liked-films",name:"Liked Films",component:A,beforeEnter:T},{path:"/register",name:"Register",component:R,beforeEnter:function(e,t,s){k.getters.getUsername?s(!1):s()}}]});function T(e,t,s){k.getters.getUsername?s():s(!1)}var V=s("+5wz"),B=s.n(V);i.a.use(B.a,d),i.a.config.productionTip=!1,new i.a({el:"#app",router:O,store:k,components:{App:_},template:"<App/>"})},WphP:function(e,t){},dvaQ:function(e,t){},lWbd:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.8ac34d19e30fcfda10e3.js.map